import{_ as g}from"./Bp_JYFVb.js";import{n as b,r as c,h as x,c as p,a as t,b as w,w as P,P as v,k as j,o as r,d as I}from"./D08H_D8t.js";import{a as h}from"./Cm0UX6qg.js";const k={class:"project-write"},T={id:"projectInfo"},D={class:"tbl"},S=t("colgroup",null,[t("col",{style:{width:"200px"}}),t("col",{style:{width:"auto"}})],-1),F=t("th",null,"프로젝트",-1),U=["value"],$=t("th",null,"구분",-1),B={name:"category",id:"category"},C=["selected"],N=["selected"],R=t("tr",null,[t("th",null,"썸네일"),t("td",null,[t("input",{type:"file",name:"thumbnail",id:"thumbInput"})])],-1),V=t("th",null,"공지사항",-1),q=["value"],A=t("th",null,"계약기간",-1),E=["value"],L=t("th",null,"계약 주체",-1),W=["value"],H=t("th",null,"담당자",-1),M=["value"],O=t("th",null,"이메일",-1),z=["value"],G=t("th",null,"연락처",-1),J=["value"],K=t("th",null,"기획",-1),Q=["value"],X=t("th",null,"마크업",-1),Y=["value"],Z=t("th",null,"디자인",-1),tt=["value"],et=t("th",null,"프론트 URL",-1),lt=["value"],nt=t("th",null,"관리자 URL",-1),ut=["value"],at=t("th",null,"관리자 ID",-1),ot=["value"],st=t("th",null,"관리자 PW",-1),it=["value"],dt=t("th",null,"FTP",-1),ct=["value"],pt=t("th",null,"FTP ID",-1),rt=["value"],_t=t("th",null,"FTP PW",-1),vt=["value"],ht=t("th",null,"호스팅",-1),mt=["value"],yt={class:"button-wrap button-wrap--mt40 tac"},wt={__name:"write",setup(ft){const m=b(),e=c(null),a=c(null),i=c(null),y=async()=>{a.value&&await h.get(`/api/project/${a.value}`).then(n=>{e.value=n.data})},f=async()=>{await h.get("/api/project/get").then(n=>{i.value=Number(n.data[n.data.length-1].id)})},_=async n=>{try{n.preventDefault();const l=new FormData,o=document.querySelector("input[type='file']"),d=document.querySelector("#category");o.files.length>0&&l.append("thumbFile",o.files[0]),d.value&&l.append(d.name,d.value),document.querySelectorAll("#projectInfo input").forEach(u=>{l.append(u.name,u.value)});let s;if(n.target.type==="submit"){l.append("id",i.value+1);const u=new Date;l.append("update",u.getTime()),l.append("made",u.getTime()),s=await $fetch("/api/project/post",{method:"POST",body:l})}else{l.append("id",a.value);const u=new Date;l.append("update",u.getTime()),s=await $fetch(`/api/project/update/${i}`,{method:"PATCH",body:l})}s.msg?(alert(s.msg),location.href="/project"):alert("등록에 실패했습니다.")}catch(l){console.error(l),alert("등록 중 오류가 발생했습니다.")}};return x(()=>{a.value=m.params.id,f(),y()}),(n,l)=>{const o=g;return r(),p("div",k,[t("form",T,[t("div",D,[t("table",null,[S,t("tbody",null,[t("tr",null,[F,t("td",null,[t("input",{type:"text",name:"project",value:e.value?e.value.project:""},null,8,U)])]),t("tr",null,[$,t("td",null,[t("select",B,[t("option",{value:"build",selected:!!(e.value&&e.value.category==="build")},"구축",8,C),t("option",{value:"maintain",selected:!!(e.value&&e.value.category==="maintain")},"운영",8,N)])])]),R,t("tr",null,[V,t("td",null,[t("input",{type:"text",name:"notice",value:e.value?e.value.notice:""},null,8,q)])]),t("tr",null,[A,t("td",null,[t("input",{type:"text",name:"period",value:e.value?e.value.period:""},null,8,E)])]),t("tr",null,[L,t("td",null,[t("input",{type:"text",name:"contractor",value:e.value?e.value.contractor:""},null,8,W)])]),t("tr",null,[H,t("td",null,[t("input",{type:"text",name:"manager",value:e.value?e.value.manager:""},null,8,M)])]),t("tr",null,[O,t("td",null,[t("input",{type:"text",name:"email",value:e.value?e.value.email:""},null,8,z)])]),t("tr",null,[G,t("td",null,[t("input",{type:"text",name:"phone",value:e.value?e.value.phone:""},null,8,J)])]),t("tr",null,[K,t("td",null,[t("input",{type:"text",name:"planning",value:e.value?e.value.planning:""},null,8,Q)])]),t("tr",null,[X,t("td",null,[t("input",{type:"text",name:"markup",value:e.value?e.value.markup:""},null,8,Y)])]),t("tr",null,[Z,t("td",null,[t("input",{type:"text",name:"design",value:e.value?e.value.design:""},null,8,tt)])]),t("tr",null,[et,t("td",null,[t("input",{type:"text",name:"frontUrl",value:e.value?e.value.frontUrl:""},null,8,lt)])]),t("tr",null,[nt,t("td",null,[t("input",{type:"text",name:"adminUrl",value:e.value?e.value.adminUrl:""},null,8,ut)])]),t("tr",null,[at,t("td",null,[t("input",{type:"text",name:"adminId",value:e.value?e.value.adminId:""},null,8,ot)])]),t("tr",null,[st,t("td",null,[t("input",{type:"text",name:"adminPw",value:e.value?e.value.adminPw:""},null,8,it)])]),t("tr",null,[dt,t("td",null,[t("input",{type:"text",name:"ftp",value:e.value?e.value.ftp:""},null,8,ct)])]),t("tr",null,[pt,t("td",null,[t("input",{type:"text",name:"ftpId",value:e.value?e.value.ftpId:""},null,8,rt)])]),t("tr",null,[_t,t("td",null,[t("input",{type:"text",name:"ftpPw",value:e.value?e.value.ftpPw:""},null,8,vt)])]),t("tr",null,[ht,t("td",null,[t("input",{type:"text",name:"hosting",value:e.value?e.value.hosting:""},null,8,mt)])])])])]),t("div",yt,[w(o,{to:"/project",class:"btn btn--bd"},{default:P(()=>[I("목록")]),_:1}),(n._.provides[v]||n.$route).path.includes("write")?(r(),p("button",{key:0,type:"submit",onClick:_,class:"btn"},"등록")):(n._.provides[v]||n.$route).path.includes("update")?(r(),p("button",{key:1,type:"button",onClick:_,class:"btn"},"수정")):j("",!0)])])])}}};export{wt as default};
